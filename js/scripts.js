"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var parallax=function(t){var e=layer.getAttribute("data-speed");layer.style.transform="translateX(".concat(t.clientX*e/1300,"px) translateY(").concat(t.clientY*e/1e3,"px)"),title.style.transform="translateX(".concat(40*t.clientX/700,"px) translateY(").concat(40*t.clientY/400,"px)"),decor2.style.transform="translateX(".concat(40*t.clientX/500,"px) translateY(").concat(30*t.clientY/600,"px)"),_toConsumableArray(title2).forEach(function(e){e.style.transform="translateX(".concat(40*t.clientX/600,"px) translateY(").concat(30*t.clientY/500,"px)")}),decor1.style.transform="translateX(".concat(40*t.clientX/350,"px) translateY(").concat(40*t.clientY/700,"px)")},layer=document.querySelector(".layer__bg"),title=document.querySelector(".parallax-logo"),title2=document.querySelectorAll(".parallax-item"),decor1=document.querySelector(".decoration-first"),decor2=document.querySelector(".decoration-second"),elementScrollTop1=document.documentElement.scrollTop;function parallaxWidthCheck(){1024<=window.innerWidth?document.addEventListener("mousemove",parallax):window.innerWidth<1024&&document.removeEventListener("mousemove",parallax)}function parallaxCheck(){var e=document.body.children[2].clientHeight,t=document.documentElement.scrollTop;e<t?document.removeEventListener("mousemove",parallax):330<t&&t<600&&1024<=window.innerWidth&&document.addEventListener("mousemove",parallax)}!function(){var e={iconButton:document.querySelector("[data-icon]"),homeButton:document.querySelector("[data-home]"),libraryButton:document.querySelector("[data-library]")};function t(){e.homeButton.classList.contains("current")||(e.homeButton.classList.add("current"),e.libraryButton.classList.contains("current")&&e.libraryButton.classList.remove("current"))}e.homeButton.addEventListener("click",t),e.iconButton.addEventListener("click",t),e.libraryButton.addEventListener("click",function(){e.libraryButton.classList.contains("current")||(e.libraryButton.classList.add("current"),e.homeButton.classList.contains("current")&&e.homeButton.classList.remove("current"))})}();var load=document.querySelector(".loader");function loaderShow(){load.classList.remove("is-hidden")}function loaderHide(){load.classList.add("is-hidden")}var preloader=document.getElementById("load");window.addEventListener("load",function(){setTimeout(function(){setTimeout(function(){parallaxWidthCheck()},3e3),preloader.classList.add("done")},3e3)});var errorNotification=(refs={errorNotification:document.querySelector(".main__error-notification"),loaderPartOne:document.querySelectorAll(".bars-common"),loaderPartTwo:document.querySelectorAll(".squares-common"),form:document.querySelector(".main__search-form"),paginationWrapper:document.querySelector(".pagination"),backdrop:document.querySelector(".backdrop"),ulForCards:document.querySelector(".gallery__list"),modalBtn:document.querySelector(".backdrop__modal__btn"),detailsSection:document.querySelector(".details-page"),btnMyLibrary:document.querySelector(".library"),btnHome:document.querySelector(".home"),libraryFilrt:document.querySelector(".library-filter"),btnTop:document.querySelector(".main__btn-scroll"),player:document.querySelector("#player"),main:document.querySelector(".main"),filmsLibrary:document.querySelector(".js-gallery"),btnWatched:document.querySelector(".btnWatched"),btnQueue:document.querySelector(".btnQueue")}).errorNotification,form=refs.form,paginationWrapper=refs.paginationWrapper,ulForCards=refs.ulForCards,backdrop=refs.backdrop,modalBtn=refs.modalBtn,detailsSection=refs.detailsSection,btnMyLibrary=refs.btnMyLibrary,libraryFilrt=refs.libraryFilrt,btnTop=refs.btnTop,player=refs.player,main=refs.main,loaderPartOne=refs.loaderPartOne,loaderPartTwo=refs.loaderPartTwo,filmsLibrary=refs.filmsLibrary,btnWatched=refs.btnWatched,btnQueue=refs.btnQueue;function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var MovieApi=function(){function n(e,t,a){_classCallCheck(this,n),this.API_KEY=e,this.BASE_URL="https://api.themoviedb.org/3/",this.IMAGE_BASE_URL="https://image.tmdb.org/t/p/",this.DEFAULT_IMAGE="./images/default_backdrop2.jpg",this.DEFAULT_POSTER="./images/default_poster.jpg",this.VIDEO_BASE_URL="https://api.themoviedb.org/3/movie/",this.movieID=0,this.searchMode="popular",this.popularFilmItem=[],this.genres=[],this.currentPage=1,this.params={generalSearchUrl:"search/movie?",popularSearchUrl:"movie/popular?",genreSearchUrl:"genre/movie/list?",byGenreSearchUrl:"discover/movie?",query:"",_page:1,lastPage:""},this.pagination={window:5,cardContainer:a,paginationContainer:t},this.imgCards={defaultBackdropImg:"",defaultPosterImg:"",currentSizes:{backdropSize:"",posterSize:""},backdropSizes:{mobile:"w500",tablet:"w500",desktop:"w500"},posterSizes:{mobile:"w342",tablet:"w500",desktop:"w780"}}}return _createClass(n,[{key:"activeLoader",value:function(){this.pagination.paginationContainer.classList.add("is-hidden"),[].concat(_toConsumableArray(loaderPartOne),_toConsumableArray(loaderPartTwo)).map(function(e){e.classList.remove("is-hidden")})}},{key:"hideLoader",value:function(){this.pagination.paginationContainer.classList.remove("is-hidden"),[].concat(_toConsumableArray(loaderPartOne),_toConsumableArray(loaderPartTwo)).map(function(e){e.classList.add("is-hidden")})}},{key:"fetchVideoById",value:function(){return fetch("".concat(this.VIDEO_BASE_URL).concat(this.movieID,"/videos?api_key=").concat(this.API_KEY)).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){var t=e.results;return 0===t.length&&onHandleTrailerError(),t[0]}).then(function(e){return e.key})}},{key:"fetchPopularFilmsList",value:function(){var a=this;return this.searchMode="popular",this.resetGalleryCard(),fetch("".concat(this.BASE_URL).concat(this.params.popularSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&page=").concat(this.params._page)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"fetchFilmsListByGenre",value:function(e){var a=this;return this.searchMode="popular",this.resetGalleryCard(),fetch("".concat(this.BASE_URL).concat(this.params.byGenreSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&page=").concat(this.params._page,"&with_genres=").concat(e)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"fetchGenres",value:function(){var a=this;return fetch("".concat(this.BASE_URL).concat(this.params.genreSearchUrl,"api_key=").concat(this.API_KEY)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.genres;return a.genres=t}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"movieSearch",value:function(){var a=this;return this.searchMode="default",fetch("".concat(this.BASE_URL).concat(this.params.generalSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&query=").concat(this.params.query,"&page=").concat(this.params._page)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),console.log(e.total_pages),e}).then(function(e){if(0===e.results.length)throw a.fetchPopularFilmsList(),Error("Sorry we dont watch this kind of movies!");return a.resetGalleryCard(),a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).catch(function(e){return a.handlErrors(e)}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"handlErrors",value:function(e){errorNotification.classList.remove("is-hidden"),errorNotification.textContent=e.message,setTimeout(function(){errorNotification.classList.add("is-hidden")},3e3)}},{key:"resetGalleryCard",value:function(){this.pagination.cardContainer.innerHTML=""}},{key:"createCardFunc",value:function(e){var t=this;main.classList.remove("is-hidden");var a=e.backdrop_path,n=e.title,r=e.id,i=e.vote_average,s=e.release_date,o=a?"".concat(MyApi.IMAGE_BASE_URL).concat(MyApi.imgCards.currentSizes.backdropSize).concat(a):MyApi.imgCards.defaultBackdropImg,c=s?"(".concat(s.slice(0,4),")"):"",d=document.createElement("img");d.setAttribute("src",o),d.classList.add("gallery__item-image"),d.setAttribute("alt",n);var l=document.createElement("div");l.classList.add("movie__image"),l.append(d);var u=document.createElement("p");u.classList.add("movie__title"),u.textContent="".concat(n," ").concat(c);var m=document.createElement("span");m.classList.add("movie__genre"),m.textContent="☆  "+"".concat(i);var p=document.createElement("div");p.classList.add("gallery__card-movie"),p.append(l,u,m);var f=document.createElement("li");return f.classList.add("gallery__list-item"),f.append(p),f.addEventListener("click",function(){t.pagination.cardContainer.classList.add("is-hidden"),t.activeLoader(),window.scrollTo(0,document.body.children[2].clientHeight),setTimeout(function(){t.activeDetailsPage(r,!1)},2e3)}),f}},{key:"activeDetailsPage",value:function(t){var o=this;form.style.display="none",btnTop.classList.add("is-hidden"),this.movieID=t;var e=this.popularFilmItem.filter(function(e){if(e.id===t)return e})[0],c=[];e.genre_ids.filter(function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=o.genres[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;if(e===s.id)return c.push(s.name)}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}});var a=c.join(", "),n=document.createElement("td");n.textContent="genre";var r=document.createElement("td");r.textContent=a;var i=document.createElement("tr");i.append(n,r),i.classList.add("details-page__rows");var s=document.createElement("td");s.textContent="original title";var d=document.createElement("td");d.textContent=e.original_title;var l=document.createElement("tr");l.classList.add("details-page__rows"),l.append(s,d);var u=document.createElement("td");u.textContent="popularity";var m=document.createElement("td");m.textContent=e.popularity;var p=document.createElement("tr");p.classList.add("details-page__rows"),p.append(u,m);var f=document.createElement("td");f.textContent="vote / votes";var h=document.createElement("span");h.classList.add("rows__vote"),h.textContent=e.vote_average;var y=document.createElement("td");y.textContent="/ ".concat(e.vote_count),h.appendChild(y);var v=document.createElement("tr");v.classList.add("details-page__rows"),v.append(f,h);var L=document.createElement("table");L.classList.add("details-page__table"),L.append(v,p,l,i);var g=document.createElement("h2");g.classList.add("details-page__title"),g.textContent=e.title;var b=document.createElement("div");b.append(g,L);var _=document.createElement("div");_.classList.add("details-page__about");var S=document.createElement("h3");S.classList.add("details-page__title","second"),S.textContent="About";var C=document.createElement("p");C.classList.add("details-page__text"),C.textContent=e.overview,_.append(S,C);var A=document.createElement("button");A.classList.add("button__add","first"),A.setAttribute("type","submite"),A.textContent="add to watched",A.addEventListener("click",this.onWatchedClick);var w=document.createElement("button");w.classList.add("button__add"),w.setAttribute("type","submite"),w.textContent="add to queue",w.addEventListener("click",this.onQueueClick);var E=document.createElement("button");E.classList.add("button__add"),E.setAttribute("type","submite"),E.textContent="watch the trailer",E.addEventListener("click",this.onTrailerClick);var k=document.createElement("div");k.classList.add("details-page__button"),k.append(A,w,E);var T=document.createElement("div");T.classList.add("details-page__description"),T.append(b,_,k);var M=document.createElement("img"),R=e.poster_path?"".concat(MyApi.IMAGE_BASE_URL).concat(MyApi.imgCards.currentSizes.posterSize).concat(e.poster_path):MyApi.DEFAULT_POSTER;M.setAttribute("src",R),M.setAttribute("alt",M.title),M.setAttribute("width","100%"),M.setAttribute("data","poster");var x=document.createElement("a");x.setAttribute("href","#"),x.appendChild(M);var P=document.createElement("button");P.classList.add("button__add","button-close"),P.textContent="X";var F=document.createElement("div");F.classList.add("details-page__foto"),F.append(x,P);var B=document.createElement("div");B.classList.add("container","details-page__film"),B.append(F,T),detailsSection.classList.remove("is-hidden"),detailsSection.appendChild(B),E.addEventListener("click",this.onTrailerClick),main.classList.add("is-hidden"),this.hideLoader(),btnAddWatched=A,btnAddQueue=w,selectFilm=e,monitorButtonStatusText(),P.addEventListener("click",function(){form.style.display="block",o.pagination.paginationContainer.classList.remove("is-hidden"),detailsSection.classList.add("is-hidden"),o.pagination.cardContainer.classList.remove("is-hidden"),btnTop.classList.remove("is-hidden"),detailsSection.innerHTML="",main.classList.remove("is-hidden"),"is-hidden"!=libraryFilrt.classList&&(btnQueue.disabled&&drawQueueFilmList(),btnWatched.disabled&&drawWatchedFilmList())})}},{key:"onTrailerClick",value:function(){openModal(event)}},{key:"onWatchedClick",value:function(){var n,e,t=JSON.parse(localStorage.getItem("filmsWatched"));if(null===t)t=[],r();else{var a=t.map(function(e,t){return e.id}).indexOf(selectFilm.id);-1!=a?(n=a,0===(e=t.reduce(function(e,t,a){return a!=n&&e.push(t),e},[])).length?localStorage.removeItem("filmsWatched"):localStorage.setItem("filmsWatched",JSON.stringify(e))):r()}function r(){t.push(selectFilm),localStorage.setItem("filmsWatched",JSON.stringify(t))}monitorButtonStatusText()}},{key:"onQueueClick",value:function(){var n,e,t=JSON.parse(localStorage.getItem("filmsQueue"));if(null===t)t=[],r();else{var a=t.map(function(e,t){return e.id}).indexOf(selectFilm.id);-1!=a?(n=a,0===(e=t.reduce(function(e,t,a){return a!=n&&e.push(t),e},[])).length?localStorage.removeItem("filmsQueue"):localStorage.setItem("filmsQueue",JSON.stringify(e))):r()}function r(){t.push(selectFilm),localStorage.setItem("filmsQueue",JSON.stringify(t))}monitorButtonStatusText()}},{key:"setPrevNextButtons",value:function(e){var t=this,a=document.createElement("button"),n=document.createElement("button"),r=document.createElement("button"),i=document.createElement("button");r.textContent="Last",i.textContent="First",r.classList.add("pagination__turning-btn"),i.classList.add("pagination__turning-btn"),a.textContent="Prev",a.classList.add("pagination__turning-btn"),n.textContent="Next",n.classList.add("pagination__turning-btn"),1===this.page&&(a.classList.add("is-hidden"),i.classList.add("is-hidden"),i.disabled=!0),this.page===e.total_pages&&(n.classList.add("is-hidden"),r.classList.add("is-hidden")),this.page<4&&i.classList.add("is-hidden"),e.total_pages<6&&(i.classList.add("is-hidden"),r.classList.add("is-hidden"),n.classList.add("is-hidden")),a.addEventListener("click",function(){t.pagesScroll(),t.decrementPage()}),n.addEventListener("click",function(){t.incrementPage(),t.pagesScroll()}),i.addEventListener("click",function(){t.resetPage(),t.pagesScroll()}),r.addEventListener("click",function(){t.pagesScroll(),t.params._page=t.params.lastPage}),this.pagination.paginationContainer.prepend(i,a),this.pagination.paginationContainer.append(n,r)}},{key:"pagesScroll",value:function(){var e=this;this.activeLoader(),this.resetGalleryCard(),window.scrollTo(0,document.body.children[2].clientHeight),"popular"===this.searchMode?setTimeout(function(){e.fetchPopularFilmsList()},2e3):setTimeout(function(){e.movieSearch()},2e3)}},{key:"setRatioButtons",value:function(e){var t,a=this,n=this.params._page-Math.floor(this.pagination.window/2),r=this.params._page+Math.floor(this.pagination.window/2);this.params.lastPage=e.total_pages,this.pagination.paginationContainer.innerHTML="",n<1&&(n=1,r=this.pagination.window),r>e.total_pages&&(n=this.params._page-(this.pagination.window-1),r=e.total_pages,n<1&&(n=1));for(var i=[],s=n;s<=r;s++){var o=document.createElement("button");o.textContent=s,o.classList.add("pagination__btn"),+o.textContent===this.params._page&&o.classList.add("active"),o.addEventListener("click",function(e){a.activeLoader(),window.scrollTo(0,document.body.children[2].clientHeight),a.page=+e.target.textContent,a.currentPage=a.page,a.pagination.cardContainer.innerHTML="","popular"===a.searchMode?setTimeout(function(){a.fetchPopularFilmsList()},2e3):setTimeout(function(){a.movieSearch()},2e3)}),i.push(o)}(t=this.pagination.paginationContainer).append.apply(t,i),"active"===this.loaderStatus&&button.classList.add("is-hidden"),this.setPrevNextButtons(e)}},{key:"incrementPage",value:function(){return this.params._page+=1}},{key:"decrementPage",value:function(){return this.params._page-=1}},{key:"resetPage",value:function(){return this.params._page=1}},{key:"checkBackdropImgSize",value:function(){return 1024<=window.innerWidth?(this.imgCards.currentSizes.backdropSize=this.imgCards.backdropSizes.desktop,void(this.imgCards.defaultBackdropImg=this.DEFAULT_IMAGE)):window.innerWidth<1024?(this.imgCards.currentSizes.backdropSize=this.imgCards.backdropSizes.tablet,void(this.imgCards.defaultBackdropImg=this.DEFAULT_IMAGE)):void 0}},{key:"checkPosterImgSize",value:function(){1200<=window.innerWidth&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.desktop,this.imgCards.defaultPosterImg="../images/default_poster.jpg"),768<=window.innerWidth&&window.innerWidth<1200&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.tablet,this.imgCards.defaultPosterImg="../images/default_poster.jpg"),window.innerWidth<768&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.mobile,this.imgCards.defaultPosterImg="../images/default_poster.jpg")}},{key:"page",get:function(){return this.params._page},set:function(e){return this.params._page=e}}]),n}(),API_KEY="91085a172e1ffb2047d72641d0a91356",MyApi=new MovieApi(API_KEY,paginationWrapper,ulForCards);function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function handleScroll(){var e=document.body.scrollTop,t=document.documentElement.scrollTop;btnTop.style.display=500<e||500<t?"block":"none"}function onHandleTrailerError(){player.src="http://www.youtube.com/embed/Zq_zgig9DqQ?autoplay=1"}function openModal(e){e.preventDefault(),MyApi.fetchVideoById().then(function(e){player.src="http://www.youtube.com/embed/".concat(e,"?autoplay=1")}),backdrop.classList.remove("backdrop--hidden"),window.addEventListener("keydown",onKeybordPress)}function closeModal(){player.src="",backdrop.classList.add("backdrop--hidden"),window.removeEventListener("keydown",onKeybordPress)}function onKeybordPress(e){"Escape"===e.code&&closeModal()}function onBeckDropCkick(e){"DIV"===e.target.nodeName&&closeModal()}history.scrollRestoration="manual",MyApi.checkBackdropImgSize(),MyApi.checkPosterImgSize(),MyApi.fetchPopularFilmsList(),MyApi.fetchGenres(),btnTop.addEventListener("click",function(){scrollToTop()}),window.onscroll=function(){parallaxCheck(),handleScroll()},modalBtn.addEventListener("click",closeModal),backdrop.addEventListener("click",onBeckDropCkick),form.addEventListener("submit",function(e){e.preventDefault(),MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),MyApi.searchMode="default";var t=e.target.elements.query.value;if(""===t.trim())return alert("There is no nameless movies!");MyApi.params.query=t,setTimeout(function(){MyApi.movieSearch()},4e3),form.reset()});var btnAddQueue="",btnAddWatched="",selectFilm="";function monitorButtonStatusText(){var e=JSON.parse(localStorage.getItem("filmsQueue"));if(null===e)btnAddQueue.textContent="Add to queue";else{var t=e.map(function(e,t){return e.id}).indexOf(selectFilm.id);btnAddQueue.textContent=-1!=t?"Delete from queue":"Add to queue"}var a=JSON.parse(localStorage.getItem("filmsWatched"));if(null===a)btnAddWatched.textContent="Add to watched";else{var n=a.map(function(e,t){return e.id}).indexOf(selectFilm.id);btnAddWatched.textContent=-1!=n?"Delete from watched":"Add to watched"}}btnQueue.addEventListener("click",drawQueueFilmList),btnWatched.addEventListener("click",drawWatchedFilmList);var _refs=refs,queue=(filmsLibrary=_refs.filmsLibrary,"You do not have to queue movies to watch. Add them."),watch="You do not have watched movies. Add them.",filmsQueueKey="filmsQueue",filmsWatchedKey="filmsWatched";function drawQueueFilmList(e){var t=localStorage.getItem(filmsQueueKey,e),a=JSON.parse(t);MyApi.pagination.cardContainer.classList.remove("is-hidden"),MyApi.resetGalleryCard(),btnQueue.classList.add("active"),btnWatched.classList.remove("active"),btnWatched.disabled=!1,btnQueue.disabled=!0,null===a||0===a.length?createPlugTitle(queue,filmsLibrary):createParseFilms(a,filmsLibrary)}function drawWatchedFilmList(e){var t=localStorage.getItem(filmsWatchedKey,e),a=JSON.parse(t);MyApi.pagination.cardContainer.classList.remove("is-hidden"),MyApi.resetGalleryCard(),btnQueue.classList.remove("active"),btnWatched.classList.add("active"),btnWatched.disabled=!0,btnQueue.disabled=!1,null===a||0===a.length?createPlugTitle(watch,filmsLibrary):createParseFilms(a,filmsLibrary)}function createParseFilms(e,a){e.forEach(function(e){var t=MyApi.createCardFunc(e);return a.append(t),a})}var messageTitle=document.getElementsByClassName("message-title");function createPlugTitle(e,t){return 0===messageTitle.length?((messageTitle=document.createElement("h2")).textContent=e,messageTitle.classList.add("message-title"),t.insertAdjacentElement("beforebegin",messageTitle)):messageTitle.textContent=e,t}function openLibrary(){window.scrollTo({top:document.body.children[2].clientHeight,behavior:"smooth"}),MyApi.resetGalleryCard(),btnQueue.disabled=!1,btnWatched.disabled=!1,detailsSection.innerHTML="",paginationWrapper.innerHTML="",form.innerHTML="",libraryFilrt.classList.remove("is-hidden"),main.classList.remove("is-hidden")}btnMyLibrary.addEventListener("click",openLibrary);var refs,thrillerRef=(refs={thrillerRef:document.querySelector("[data-thriller]"),comedyRef:document.querySelector("[data-comedy]"),animationRef:document.querySelector("[data-animation]"),actionRef:document.querySelector("[data-action]"),westernRef:document.querySelector("[data-western]"),fantasyRef:document.querySelector("[data-fantasy]"),dramaRef:document.querySelector("[data-drama]"),mainContainer:document.querySelector(".main__container")}).thrillerRef,comedyRef=refs.comedyRef,actionRef=refs.actionRef,animationRef=refs.animationRef,westernRef=refs.westernRef,fantasyRef=refs.fantasyRef,dramaRef=refs.dramaRef,mainContainer=refs.mainContainer,searchGenre="";function drawFilmListByGenre(){var t,a;MyApi.fetchGenres().then(function(e){t=e}).then(function(){return t.forEach(function(e){e.name.toLowerCase()===searchGenre&&(a=e.id)})}).then(function(){return MyApi.fetchFilmsListByGenre(a)}).catch(console.log.bind(console))}function classToggle(){var e={logoText:document.querySelector("[data-logoText]")};document.body.clientWidth<=320?e.logoText.classList.add("is-hidden"):e.logoText.classList.remove("is-hidden")}thrillerRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=thrillerRef.innerHTML.toLowerCase(),thrillerRef.classList.add("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),comedyRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=comedyRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.add("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),actionRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=actionRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.add("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),animationRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=animationRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.add("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),westernRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=westernRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.add("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),fantasyRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=fantasyRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.add("current"),dramaRef.classList.remove("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),dramaRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=dramaRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.add("current"),setTimeout(function(){drawFilmListByGenre()},2e3)}),classToggle(),window.addEventListener("resize",function(){var e={logoText:document.querySelector("[data-logoText]")};document.body.clientWidth<=320?e.logoText.classList.add("is-hidden"):e.logoText.classList.remove("is-hidden")});