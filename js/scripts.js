"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var parallax=function(t){var e=layer.getAttribute("data-speed");layer.style.transform="translateX(".concat(t.clientX*e/1300,"px) translateY(").concat(t.clientY*e/1e3,"px)"),title.style.transform="translateX(".concat(40*t.clientX/700,"px) translateY(").concat(40*t.clientY/400,"px)"),decor2.style.transform="translateX(".concat(40*t.clientX/500,"px) translateY(").concat(30*t.clientY/600,"px)"),_toConsumableArray(title2).forEach(function(e){e.style.transform="translateX(".concat(40*t.clientX/600,"px) translateY(").concat(30*t.clientY/500,"px)")}),decor1.style.transform="translateX(".concat(40*t.clientX/350,"px) translateY(").concat(40*t.clientY/700,"px)")},layer=document.querySelector(".layer__bg"),title=document.querySelector(".parallax-logo"),title2=document.querySelectorAll(".parallax-item"),decor1=document.querySelector(".decoration-first"),decor2=document.querySelector(".decoration-second"),elementScrollTop1=document.documentElement.scrollTop;function parallaxWidthCheck(){1024<=window.innerWidth?document.addEventListener("mousemove",parallax):window.innerWidth<1024&&document.removeEventListener("mousemove",parallax)}function parallaxCheck(){var e=document.body.children[1].clientHeight,t=document.documentElement.scrollTop;e<t?document.removeEventListener("mousemove",parallax):330<t&&t<600&&1024<=window.innerWidth&&document.addEventListener("mousemove",parallax)}!function(){var e={homePage:document.querySelector("[data-home]"),libraryPage:document.querySelector("[data-library]"),iconButton:document.querySelector("[data-icon]")},t=e.homePage,a=e.libraryPage,n=e.iconButton;function r(){t.classList.contains("current")||(t.classList.add("current"),a.classList.contains("current")&&a.classList.remove("current"))}t.addEventListener("click",r),n.addEventListener("click",r),a.addEventListener("click",function(){a.classList.contains("current")||(a.classList.add("current"),t.classList.contains("current")&&t.classList.remove("current"))})}();var load=document.querySelector(".loader");function loaderShow(){load.classList.remove("is-hidden")}function loaderHide(){load.classList.add("is-hidden")}var preloader=document.getElementById("load");window.addEventListener("load",function(){setTimeout(function(){setTimeout(function(){parallaxWidthCheck()},3e3),preloader.classList.add("done")},3e3)});var refs={loaderPartOne:document.querySelectorAll(".bars-common"),loaderPartTwo:document.querySelectorAll(".squares-common"),errorNotification:document.querySelector(".main__error-notification"),main:document.querySelector(".main"),detailsSection:document.querySelector(".details-page"),libraryFilrt:document.querySelector(".library-filter"),paginationWrapper:document.querySelector(".pagination"),ulForCards:document.querySelector(".gallery__list"),btnTop:document.querySelector(".main__btn-scroll"),modalBtn:document.querySelector(".backdrop__modal__btn"),backdrop:document.querySelector(".backdrop"),player:document.querySelector("#player"),form:document.querySelector(".main__search-form"),btnMyLibrary:document.querySelector(".library"),filmsLibrary:document.querySelector(".js-gallery"),btnWatched:document.querySelector(".btnWatched"),btnQueue:document.querySelector(".btnQueue"),thrillerRef:document.querySelector("[data-thriller]"),comedyRef:document.querySelector("[data-comedy]"),animationRef:document.querySelector("[data-animation]"),actionRef:document.querySelector("[data-action]"),westernRef:document.querySelector("[data-western]"),fantasyRef:document.querySelector("[data-fantasy]"),dramaRef:document.querySelector("[data-drama]"),logoText:document.querySelector("[data-logoText]"),homePage:document.querySelector("[data-home]"),libraryPage:document.querySelector("[data-library]"),layer:document.querySelector(".layer__bg"),title:document.querySelector(".parallax-logo"),title2:document.querySelectorAll(".parallax-item"),decor1:document.querySelector(".decoration-first"),decor2:document.querySelector(".decoration-second"),iconButton:document.querySelector("[data-icon]")},loaderPartOne=refs.loaderPartOne,loaderPartTwo=refs.loaderPartTwo,errorNotification=refs.errorNotification,main=refs.main,detailsSection=refs.detailsSection,libraryFilrt=refs.libraryFilrt,paginationWrapper=refs.paginationWrapper,ulForCards=refs.ulForCards,btnTop=refs.btnTop,modalBtn=refs.modalBtn,backdrop=refs.backdrop,player=refs.player,form=refs.form,btnMyLibrary=refs.btnMyLibrary,filmsLibrary=refs.filmsLibrary,btnWatched=refs.btnWatched,btnQueue=refs.btnQueue,thrillerRef=refs.thrillerRef,comedyRef=refs.comedyRef,actionRef=refs.actionRef,animationRef=refs.animationRef,westernRef=refs.westernRef,fantasyRef=refs.fantasyRef,dramaRef=refs.dramaRef,logoText=refs.logoText,homePage=refs.homePage,libraryPage=refs.libraryPage,iconButton=(layer=refs.layer,title=refs.title,title2=refs.title2,decor1=refs.decor1,decor2=refs.decor2,refs.iconButton);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var MovieApi=function(){function n(e,t,a){_classCallCheck(this,n),this.API_KEY=e,this.BASE_URL="https://api.themoviedb.org/3/",this.IMAGE_BASE_URL="https://image.tmdb.org/t/p/",this.DEFAULT_IMAGE="./images/default_backdrop2.jpg",this.DEFAULT_POSTER="./images/default_poster.jpg",this.VIDEO_BASE_URL="https://api.themoviedb.org/3/movie/",this.movieID=0,this.searchMode="popular",this.popularFilmItem=[],this.watchedList=[],this.queueList=[],this.genres=[],this.currentPage=1,this.params={generalSearchUrl:"search/movie?",popularSearchUrl:"movie/popular?",genreSearchUrl:"genre/movie/list?",byGenreSearchUrl:"discover/movie?",query:"",_page:1,lastPage:""},this.pagination={window:5,cardContainer:a,paginationContainer:t},this.imgCards={defaultBackdropImg:"",defaultPosterImg:"",currentSizes:{backdropSize:"",posterSize:""},backdropSizes:{mobile:"w500",tablet:"w500",desktop:"w500"},posterSizes:{mobile:"w342",tablet:"w500",desktop:"w780"}}}return _createClass(n,[{key:"activeLoader",value:function(){this.pagination.paginationContainer.classList.add("is-hidden"),[].concat(_toConsumableArray(loaderPartOne),_toConsumableArray(loaderPartTwo)).map(function(e){e.classList.remove("is-hidden")})}},{key:"hideLoader",value:function(){this.pagination.paginationContainer.classList.remove("is-hidden"),[].concat(_toConsumableArray(loaderPartOne),_toConsumableArray(loaderPartTwo)).map(function(e){e.classList.add("is-hidden")})}},{key:"fetchVideoById",value:function(){return fetch("".concat(this.VIDEO_BASE_URL).concat(this.movieID,"/videos?api_key=").concat(this.API_KEY)).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){var t=e.results;return 0===t.length&&onHandleTrailerError(),t[0]}).then(function(e){return e.key})}},{key:"fetchPopularFilmsList",value:function(){var a=this;return this.searchMode="popular",this.resetGalleryCard(),fetch("".concat(this.BASE_URL).concat(this.params.popularSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&page=").concat(this.params._page)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"fetchFilmsListByGenre",value:function(e){var a=this;return this.searchMode="popular",this.resetGalleryCard(),fetch("".concat(this.BASE_URL).concat(this.params.byGenreSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&page=").concat(this.params._page,"&with_genres=").concat(e)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"fetchGenres",value:function(){var a=this;return fetch("".concat(this.BASE_URL).concat(this.params.genreSearchUrl,"api_key=").concat(this.API_KEY)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),e}).then(function(e){var t=e.genres;return a.genres=t}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"movieSearch",value:function(){var a=this;return this.searchMode="default",fetch("".concat(this.BASE_URL).concat(this.params.generalSearchUrl,"api_key=").concat(this.API_KEY,"&language=en-US&query=").concat(this.params.query,"&page=").concat(this.params._page)).then(function(e){return e.json()}).then(function(e){return a.setRatioButtons(e),console.log(e.total_pages),e}).then(function(e){if(0===e.results.length)throw a.fetchPopularFilmsList(),Error("Sorry we dont watch this kind of movies!");return a.resetGalleryCard(),a.setRatioButtons(e),e}).then(function(e){var t=e.results;return a.popularFilmItem=t}).then(function(e){return e.map(function(e){return a.createCardFunc(e)})}).then(function(e){var t;return(t=MyApi.pagination.cardContainer).append.apply(t,_toConsumableArray(e))}).catch(function(e){return a.handlErrors(e)}).finally(function(){a.pagination.cardContainer.classList.remove("is-hidden"),a.hideLoader()})}},{key:"handlErrors",value:function(e){errorNotification.classList.remove("is-hidden"),errorNotification.textContent=e.message,setTimeout(function(){errorNotification.classList.add("is-hidden")},3e3)}},{key:"resetGalleryCard",value:function(){this.pagination.cardContainer.innerHTML=""}},{key:"createCardFunc",value:function(e,t){var a=this;main.classList.remove("is-hidden");var n=e.backdrop_path,r=e.title,i=e.id,s=e.vote_average,o=e.release_date,c=n?"".concat(MyApi.IMAGE_BASE_URL).concat(MyApi.imgCards.currentSizes.backdropSize).concat(n):MyApi.imgCards.defaultBackdropImg,d=o?"(".concat(o.slice(0,4),")"):"",l=document.createElement("img");l.setAttribute("src",c),l.classList.add("gallery__item-image"),l.setAttribute("alt",r);var u=document.createElement("div");u.classList.add("movie__image"),u.append(l);var m=document.createElement("p");m.classList.add("movie__title"),m.textContent="".concat(r," ").concat(d);var p=document.createElement("span");p.classList.add("movie__genre"),p.textContent="☆  "+"".concat(s);var f=document.createElement("div");f.classList.add("gallery__card-movie"),f.append(u,m,p);var h=document.createElement("li");return h.classList.add("gallery__list-item"),h.append(f),h.addEventListener("click",function(){a.pagination.cardContainer.classList.add("is-hidden"),a.activeLoader(),window.scrollTo(0,document.body.children[2].clientHeight),setTimeout(function(){a.activeDetailsPage(i,t)},2e3)}),h}},{key:"activeDetailsPage",value:function(t,e){var o=this;form.style.display="none",btnTop.classList.add("is-hidden"),this.movieID=t;var a=[];"Queue"===e?(console.log("Queue!!!!!!!!!!!"),a=this.queueList):"Watched"===e?(console.log("Watched!!!!!!!!"),a=this.watchedList):e||(console.log("OTHER"),a=this.popularFilmItem);var n=a.filter(function(e){if(e.id===t)return e})[0],c=[];n.genre_ids.filter(function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=o.genres[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;if(e===s.id)return c.push(s.name)}}catch(e){a=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}});var r=c.join(", "),i=document.createElement("td");i.textContent="genre";var s=document.createElement("td");s.textContent=r;var d=document.createElement("tr");d.append(i,s),d.classList.add("details-page__rows");var l=document.createElement("td");l.textContent="original title";var u=document.createElement("td");u.textContent=n.original_title;var m=document.createElement("tr");m.classList.add("details-page__rows"),m.append(l,u);var p=document.createElement("td");p.textContent="popularity";var f=document.createElement("td");f.textContent=n.popularity;var h=document.createElement("tr");h.classList.add("details-page__rows"),h.append(p,f);var y=document.createElement("td");y.textContent="vote / votes";var v=document.createElement("span");v.classList.add("rows__vote"),v.textContent=n.vote_average;var L=document.createElement("td");L.textContent="/ ".concat(n.vote_count),v.appendChild(L);var g=document.createElement("tr");g.classList.add("details-page__rows"),g.append(y,v);var b=document.createElement("table");b.classList.add("details-page__table"),b.append(g,h,m,d);var _=document.createElement("h2");_.classList.add("details-page__title"),_.textContent=n.title;var S=document.createElement("div");S.append(_,b);var w=document.createElement("div");w.classList.add("details-page__about");var E=document.createElement("h3");E.classList.add("details-page__title","second"),E.textContent="About";var C=document.createElement("p");C.classList.add("details-page__text"),C.textContent=n.overview,w.append(E,C);var A=document.createElement("button");A.classList.add("button__add","first"),A.setAttribute("type","submite"),A.textContent="add to watched",A.addEventListener("click",this.onWatchedClick);var k=document.createElement("button");k.classList.add("button__add"),k.setAttribute("type","submite"),k.textContent="add to queue",k.addEventListener("click",this.onQueueClick);var R=document.createElement("button");R.classList.add("button__add"),R.setAttribute("type","submite"),R.textContent="watch the trailer",R.addEventListener("click",this.onTrailerClick);var T=document.createElement("div");T.classList.add("details-page__button"),T.append(A,k,R);var M=document.createElement("div");M.classList.add("details-page__description"),M.append(S,w,T);var P=document.createElement("img"),x=n.poster_path?"".concat(MyApi.IMAGE_BASE_URL).concat(MyApi.imgCards.currentSizes.posterSize).concat(n.poster_path):MyApi.DEFAULT_POSTER;P.setAttribute("src",x),P.setAttribute("alt",P.title),P.setAttribute("width","100%"),P.setAttribute("data","poster");var F=document.createElement("a");F.setAttribute("href","#"),F.appendChild(P);var q=document.createElement("button");q.classList.add("button__add","button-close"),q.textContent="X";var W=document.createElement("div");W.classList.add("details-page__foto"),W.append(F,q);var B=document.createElement("div");B.classList.add("container","details-page__film"),B.append(W,M),detailsSection.classList.remove("is-hidden"),detailsSection.appendChild(B),R.addEventListener("click",this.onTrailerClick),main.classList.add("is-hidden"),this.hideLoader(),btnAddWatched=A,btnAddQueue=k,selectFilm=n,monitorButtonStatusText(),q.addEventListener("click",function(){form.style.display="block",o.pagination.paginationContainer.classList.remove("is-hidden"),detailsSection.classList.add("is-hidden"),o.pagination.cardContainer.classList.remove("is-hidden"),btnTop.classList.remove("is-hidden"),detailsSection.innerHTML="",main.classList.remove("is-hidden"),"is-hidden"!=libraryFilrt.classList&&(btnQueue.disabled&&drawQueueFilmList(),btnWatched.disabled&&drawWatchedFilmList())})}},{key:"onTrailerClick",value:function(){openModal(event)}},{key:"onWatchedClick",value:function(){var n,e,t=JSON.parse(localStorage.getItem("filmsWatched"));if(null===t)t=[],r();else{var a=t.map(function(e,t){return e.id}).indexOf(selectFilm.id);-1!=a?(n=a,0===(e=t.reduce(function(e,t,a){return a!=n&&e.push(t),e},[])).length?localStorage.removeItem("filmsWatched"):localStorage.setItem("filmsWatched",JSON.stringify(e))):r()}function r(){t.push(selectFilm),localStorage.setItem("filmsWatched",JSON.stringify(t))}monitorButtonStatusText()}},{key:"onQueueClick",value:function(){var n,e,t=JSON.parse(localStorage.getItem("filmsQueue"));if(null===t)t=[],r();else{var a=t.map(function(e,t){return e.id}).indexOf(selectFilm.id);-1!=a?(n=a,0===(e=t.reduce(function(e,t,a){return a!=n&&e.push(t),e},[])).length?localStorage.removeItem("filmsQueue"):localStorage.setItem("filmsQueue",JSON.stringify(e))):r()}function r(){t.push(selectFilm),localStorage.setItem("filmsQueue",JSON.stringify(t))}monitorButtonStatusText()}},{key:"setPrevNextButtons",value:function(e){var t=this,a=document.createElement("button"),n=document.createElement("button"),r=document.createElement("button"),i=document.createElement("button");r.textContent="Last",i.textContent="First",r.classList.add("pagination__turning-btn"),i.classList.add("pagination__turning-btn"),a.textContent="Prev",a.classList.add("pagination__turning-btn"),n.textContent="Next",n.classList.add("pagination__turning-btn"),1===this.page&&(a.classList.add("is-hidden"),i.classList.add("is-hidden"),i.disabled=!0),this.page===e.total_pages&&(n.classList.add("is-hidden"),r.classList.add("is-hidden")),this.page<4&&i.classList.add("is-hidden"),e.total_pages<6&&(i.classList.add("is-hidden"),r.classList.add("is-hidden"),n.classList.add("is-hidden")),a.addEventListener("click",function(){t.pagesScroll(),t.decrementPage()}),n.addEventListener("click",function(){t.incrementPage(),t.pagesScroll()}),i.addEventListener("click",function(){t.resetPage(),t.pagesScroll()}),r.addEventListener("click",function(){t.pagesScroll(),t.params._page=t.params.lastPage}),this.pagination.paginationContainer.prepend(i,a),this.pagination.paginationContainer.append(n,r)}},{key:"pagesScroll",value:function(){var e=this;this.activeLoader(),this.resetGalleryCard(),window.scrollTo(0,document.body.children[1].clientHeight),"popular"===this.searchMode?setTimeout(function(){e.fetchPopularFilmsList()},2e3):setTimeout(function(){e.movieSearch()},2e3)}},{key:"setRatioButtons",value:function(e){var t,a=this,n=this.params._page-Math.floor(this.pagination.window/2),r=this.params._page+Math.floor(this.pagination.window/2);this.params.lastPage=e.total_pages,this.pagination.paginationContainer.innerHTML="",n<1&&(n=1,r=this.pagination.window),r>e.total_pages&&(n=this.params._page-(this.pagination.window-1),r=e.total_pages,n<1&&(n=1));for(var i=[],s=n;s<=r;s++){var o=document.createElement("button");o.textContent=s,o.classList.add("pagination__btn"),+o.textContent===this.params._page&&o.classList.add("active"),o.addEventListener("click",function(e){a.activeLoader(),window.scrollTo(0,document.body.children[1].clientHeight),a.page=+e.target.textContent,a.currentPage=a.page,a.pagination.cardContainer.innerHTML="","popular"===a.searchMode?setTimeout(function(){a.fetchPopularFilmsList()},2e3):setTimeout(function(){a.movieSearch()},2e3)}),i.push(o)}(t=this.pagination.paginationContainer).append.apply(t,i),"active"===this.loaderStatus&&button.classList.add("is-hidden"),this.setPrevNextButtons(e)}},{key:"incrementPage",value:function(){return this.params._page+=1}},{key:"decrementPage",value:function(){return this.params._page-=1}},{key:"resetPage",value:function(){return this.params._page=1}},{key:"checkBackdropImgSize",value:function(){return 1024<=window.innerWidth?(this.imgCards.currentSizes.backdropSize=this.imgCards.backdropSizes.desktop,void(this.imgCards.defaultBackdropImg=this.DEFAULT_IMAGE)):window.innerWidth<1024?(this.imgCards.currentSizes.backdropSize=this.imgCards.backdropSizes.tablet,void(this.imgCards.defaultBackdropImg=this.DEFAULT_IMAGE)):void 0}},{key:"checkPosterImgSize",value:function(){1200<=window.innerWidth&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.desktop,this.imgCards.defaultPosterImg="../images/default_poster.jpg"),768<=window.innerWidth&&window.innerWidth<1200&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.tablet,this.imgCards.defaultPosterImg="../images/default_poster.jpg"),window.innerWidth<768&&(this.imgCards.currentSizes.posterSize=this.imgCards.posterSizes.mobile,this.imgCards.defaultPosterImg="../images/default_poster.jpg")}},{key:"page",get:function(){return this.params._page},set:function(e){return this.params._page=e}}]),n}(),API_KEY="91085a172e1ffb2047d72641d0a91356",MyApi=new MovieApi(API_KEY,paginationWrapper,ulForCards);function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function handleScroll(){var e=document.body.scrollTop,t=document.documentElement.scrollTop;btnTop.style.display=500<e||500<t?"block":"none"}function onHandleTrailerError(){player.src="http://www.youtube.com/embed/Zq_zgig9DqQ?autoplay=1"}function openModal(e){e.preventDefault(),MyApi.fetchVideoById().then(function(e){player.src="http://www.youtube.com/embed/".concat(e,"?autoplay=1")}),backdrop.classList.remove("backdrop--hidden"),window.addEventListener("keydown",onKeybordPress)}function closeModal(){player.src="",backdrop.classList.add("backdrop--hidden"),window.removeEventListener("keydown",onKeybordPress)}function onKeybordPress(e){"Escape"===e.code&&closeModal()}function onBeckDropCkick(e){"DIV"===e.target.nodeName&&closeModal()}history.scrollRestoration="manual",MyApi.checkBackdropImgSize(),MyApi.checkPosterImgSize(),MyApi.fetchPopularFilmsList(),MyApi.fetchGenres(),btnTop.addEventListener("click",function(){scrollToTop()}),window.onscroll=function(){parallaxCheck(),handleScroll()},modalBtn.addEventListener("click",closeModal),backdrop.addEventListener("click",onBeckDropCkick),form.addEventListener("submit",function(e){e.preventDefault(),MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),MyApi.searchMode="default";var t=e.target.elements.query.value;if(""===t.trim())return alert("There is no nameless movies!");MyApi.params.query=t,setTimeout(function(){MyApi.movieSearch()},4e3),form.reset()});var btnAddQueue="",btnAddWatched="",selectFilm="";function monitorButtonStatusText(){var e=JSON.parse(localStorage.getItem("filmsQueue"));if(null===e)btnAddQueue.textContent="Add to queue";else{var t=e.map(function(e,t){return e.id}).indexOf(selectFilm.id);btnAddQueue.textContent=-1!=t?"Delete from queue":"Add to queue"}var a=JSON.parse(localStorage.getItem("filmsWatched"));if(null===a)btnAddWatched.textContent="Add to watched";else{var n=a.map(function(e,t){return e.id}).indexOf(selectFilm.id);btnAddWatched.textContent=-1!=n?"Delete from watched":"Add to watched"}}btnQueue.addEventListener("click",drawQueueFilmList),btnWatched.addEventListener("click",drawWatchedFilmList),btnMyLibrary.addEventListener("click",openLibrary);var queue="You do not have to queue movies to watch. Add them.",watch="You do not have watched movies. Add them.",filmsQueueKey="filmsQueue",filmsWatchedKey="filmsWatched";function drawQueueFilmList(e){var t=localStorage.getItem(filmsQueueKey,e),a=JSON.parse(t);MyApi.pagination.cardContainer.classList.remove("is-hidden"),MyApi.queueList=a,MyApi.resetGalleryCard(),btnQueue.classList.add("active"),btnWatched.classList.remove("active"),btnWatched.disabled=!1,btnQueue.disabled=!0;null===a||0===a.length?createPlugTitle(queue,filmsLibrary):createParseFilms(a,filmsLibrary,"Queue")}function drawWatchedFilmList(e){var t=localStorage.getItem(filmsWatchedKey,e),a=JSON.parse(t);MyApi.pagination.cardContainer.classList.remove("is-hidden"),MyApi.watchedList=a,MyApi.resetGalleryCard(),btnQueue.classList.remove("active"),btnWatched.classList.add("active"),btnWatched.disabled=!0,btnQueue.disabled=!1;null===a||0===a.length?createPlugTitle(watch,filmsLibrary):createParseFilms(a,filmsLibrary,"Watched")}function createParseFilms(e,a,n){e.forEach(function(e){var t=MyApi.createCardFunc(e,n);return a.append(t),a})}var messageTitle=document.getElementsByClassName("message-title");function createPlugTitle(e,t){return 0===messageTitle.length?((messageTitle=document.createElement("h2")).textContent=e,messageTitle.classList.add("message-title"),t.insertAdjacentElement("beforebegin",messageTitle)):messageTitle.textContent=e,t}function openLibrary(){window.scrollTo({top:document.body.children[1].clientHeight,behavior:"smooth"}),MyApi.resetGalleryCard(),btnQueue.disabled=!1,btnWatched.disabled=!1,detailsSection.innerHTML="",paginationWrapper.innerHTML="",form.innerHTML="",libraryFilrt.classList.remove("is-hidden"),main.classList.remove("is-hidden")}btnMyLibrary.addEventListener("click",openLibrary);var searchGenre="";function drawFilmListByGenre(){var t,a;MyApi.fetchGenres().then(function(e){t=e}).then(function(){return t.forEach(function(e){e.name.toLowerCase()===searchGenre&&(a=e.id)})}).then(function(){return MyApi.fetchFilmsListByGenre(a)}).catch(console.log.bind(console))}function classToggle(){document.body.clientWidth<=320?logoText.classList.add("is-hidden"):logoText.classList.remove("is-hidden")}thrillerRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=thrillerRef.innerHTML.toLowerCase(),thrillerRef.classList.add("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current")}),thrillerRef.addEventListener("click",drawFilmListByGenre),comedyRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),comedyRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=comedyRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.add("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current")}),comedyRef.addEventListener("click",drawFilmListByGenre),actionRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),actionRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=actionRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.add("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current")}),actionRef.addEventListener("click",drawFilmListByGenre),animationRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),animationRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=animationRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.add("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current")}),animationRef.addEventListener("click",drawFilmListByGenre),westernRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),westernRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=westernRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.add("current"),fantasyRef.classList.remove("current"),dramaRef.classList.remove("current")}),westernRef.addEventListener("click",drawFilmListByGenre),fantasyRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),fantasyRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=fantasyRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.add("current"),dramaRef.classList.remove("current")}),fantasyRef.addEventListener("click",drawFilmListByGenre),dramaRef.addEventListener("click",function(){setTimeout(function(){drawFilmListByGenre()},2e3)}),dramaRef.addEventListener("click",function(){MyApi.resetGalleryCard(),MyApi.activeLoader(),MyApi.resetPage(),detailsSection.classList.add("is-hidden"),libraryFilrt.classList.add("is-hidden"),detailsSection.innerHTML="",paginationWrapper.innerHTML="",searchGenre=dramaRef.innerHTML.toLowerCase(),thrillerRef.classList.remove("current"),comedyRef.classList.remove("current"),animationRef.classList.remove("current"),actionRef.classList.remove("current"),westernRef.classList.remove("current"),fantasyRef.classList.remove("current"),dramaRef.classList.add("current")}),dramaRef.addEventListener("click",drawFilmListByGenre),classToggle(),window.addEventListener("resize",function(){document.body.clientWidth<=320?logoText.classList.add("is-hidden"):logoText.classList.remove("is-hidden")});